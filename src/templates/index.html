{% extends "layout.html" %}

{% block title %} Mapa de Almacenes {% endblock title %}

{% block content %}
<h1 class="mt-4">Mapa de Almacenes</h1>
<ol class="breadcrumb mb-4">
    <li class="breadcrumb-item active">Base Moche</li>
</ol>

<div class="warehouse-map">
    <div>
        <img src="{{ url_for('static', filename='assets/Base_moche.png') }}" alt="Plano de Almacenes"
            style="width: 150%; height: 150%;">
    </div>
    <div>
        {% for item in almacenes %}
        {% for css in item.almacenCSSDetalles %}
        <div class="cell"
            style="top: {{ css.top }}px; left: {{ css.left_pos }}px; width: {{ css.width }}px; height: {{ css.height }}px; background-color: {{ css.color }};"
            onmouseover="showInfo({{ item.id }});" onmouseout="hideInfo({{ item.id }});">
            {{ item.nombre }}
        </div>
        <div class="info-box" id="info-box-{{ item.id }}"
            style="display: none; position: absolute; top: {{ css.top + css.height + 10 }}px; left: {{ css.left_pos }}px;">
            Puertas del Almacén '{{ item.nombre }}'
            <div class="info-content">
                {% for puerta in item.puertas %}
                <div class="info-item">
                    {{ puerta.nombre }} - {{ puerta.estado.descripcion }}
                    {% if puerta.contrato %}
                    - {{ puerta.contrato.cliente.nombre }}
                    {% else %}
                    - SIN CLIENTE
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
        {% endfor %}
        <div class="cell G1"
            data-info='{"Celda": "G1", "Estado": "Libre", "Cliente": "Danper", "Duración": "12 meses", "Vencimiento": "2025-01-01"}'>
            G1
        </div>
        <div class="cell G2"
            data-info='{"Celda": "G2", "Estado": "Ocupado", "Cliente": "Cliente 2", "Duración": "6 meses", "Vencimiento": "2024-06-01"}'>
            G2
        </div>
    </div>
</div>

{% endblock content %}

{% block customJS %}

{% endblock customJS %}